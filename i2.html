<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manifest Display</title>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <style>
        /* Swiper default styles */
        .swiper-container {
            width: 100%;
            height: 200px;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;

            /* Center slide text vertically */
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>

    <h1 id="pageTitle">Select a theme</h1>

    <input type="text" id="combinationInput" placeholder="Combination (e.g. 1-2-3-4)" onchange="updateSlidesFromCombination()">

    <select id="folderDropdown" onchange="loadFiles()">
        <option value="">Select a theme...</option>
    </select>

    <div id="displayContainer">
        <!-- The extracted content will be displayed here -->
    </div>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        const BASE_URL = 'https://raw.githubusercontent.com/thqrs/wordblocks/main/';
        let swipers = [];

        // ... (patterns, window.onload, loadFiles, extractSections) remain unchanged

        function displayData(allSections) {
            const container = document.getElementById('displayContainer');

            Object.keys(patterns).forEach((h2Name, index) => {
                const sectionDiv = document.createElement('div');

                const h2 = document.createElement('h2');
                h2.textContent = h2Name;
                sectionDiv.appendChild(h2);

                const swiperContainer = document.createElement('div');
                swiperContainer.className = 'swiper-container';

                const swiperWrapper = document.createElement('div');
                swiperWrapper.className = 'swiper-wrapper';

                allSections[h2Name].forEach(sectionContent => {
                    const slideDiv = document.createElement('div');
                    slideDiv.className = 'swiper-slide';
                    slideDiv.textContent = sectionContent;
                    swiperWrapper.appendChild(slideDiv);
                });

                const fileDropdown = document.createElement('select');
                fileDropdown.onchange = () => updateCombinationInput();

                allSections[h2Name].forEach((_, fileIndex) => {
                    const option = document.createElement('option');
                    option.value = fileIndex;
                    option.textContent = data.folders[theme][fileIndex];
                    fileDropdown.appendChild(option);
                });

                const slideNumberInput = document.createElement('input');
                slideNumberInput.type = 'number';
                slideNumberInput.min = 1;
                slideNumberInput.max = allSections[h2Name].length;
                slideNumberInput.onchange = function () {
                    const slideIndex = parseInt(this.value) - 1;
                    swipers[index].slideTo(slideIndex);
                    updateCombinationInput();
                };

                swiperContainer.appendChild(swiperWrapper);
                sectionDiv.appendChild(swiperContainer);
                sectionDiv.appendChild(fileDropdown);
                sectionDiv.appendChild(slideNumberInput);
                container.appendChild(sectionDiv);
                
                const swiper = new Swiper(swiperContainer, {
                    on: {
                        slideChange: function () {
                            slideNumberInput.value = this.activeIndex + 1;
                            fileDropdown.selectedIndex = this.activeIndex;
                            updateCombinationInput();
                        }
                    }
                });
                swipers.push(swiper);
            });
        }

        function updateCombinationInput() {
            const combination = swipers.map(swiper => swiper.activeIndex + 1).join('-');
            document.getElementById('combinationInput').value = combination;
        }

        function updateSlidesFromCombination() {
            const combination = document.getElementById('combinationInput').value;
            const slideIndices = combination.split('-').map(num => parseInt(num) - 1);
            slideIndices.forEach((slideIndex, i) => {
                swipers[i].slideTo(slideIndex);
            });
        }
    </script>
</body>

</html>
